# P.1: Express ideas directly in code
アイデアはコードで直接表現せよ

## Reason
コンパイラはコメント(または設計書)を読みませんし, 多くのプログラマも(一貫して)読みません.  
コードで表現されたものは, セマンティクスが定義されており, (原理的に)コンパイラやその他のツールでチェックすることができます.  

## Example
```
class Date {
public:
    Month month() const;  // do
    int month();          // don't
    // ...
};
```
monthの最初の宣言は, 
- Monthを返すこと(Month型であることから)
- Dateオブジェクトの状態を変更しないこと(const修飾子が付いていることから)  
を明示しています.  
2つ目の宣言では, 読者に推測させてしまい捕らえられないバグの可能性を高めてしまいます．  

## Example, bad
このループはstd::findの制限された形式です.
```
void f(vector<string>& v)
{
    string val;
    cin >> val;
    // ...
    int index = -1;                    // bad, plus should use gsl::index
    for (int i = 0; i < v.size(); ++i) {
        if (v[i] == val) {
            index = i;
            break;
        }
    }
    // ...
}
```

## Example, good
より明確な意図の表現としては
```
void f(vector<string>& v)
{
    string val;
    cin >> val;
    // ...
    auto p = find(begin(v), end(v), val);  // better
    // ...
}
```
適切に設計されたライブラリは,  
言語機能を直接使用するよりも意図(何かがどのように行われているかではなく, 何が行われているか)をはるかによく表現します.  

C++プログラマーは, 標準ライブラリの基本を知り, 必要に応じてそれを使うべきです.  
プログラマーは, 作業中のプロジェクトの基礎ライブラリの基本を知り, それを適切に使用する必要があります.  
このガイドラインを使用するプログラマは, [ガイドラインサポートライブラリ](https://github.com/Microsoft/GSL)を知り, それを適切に使用する必要があります.  

## Example
```
change_speed(double s);   // bad: sは何を意味するの?
// ...
change_speed(2.3);
```
より良い方法は, 2倍の意味(新しい速度か, 古い速度の差分か)と使用する単位を明確にすることです.  
```
change_speed(Speed s);     // better: sの意味が明確
// ...
change_speed(2.3);         // error: 単位がない
change_speed(23_m / 10s);  // m/s(meters per second)
```
単純な(単位のない)doubleをdeltaとして受け入れることもできましたが, それではエラーになってしまいます.  
もし, 絶対速度とdeltaの両方が必要であれば, delta型を定義したでしょう。

## Enforcement
一般的には非常に難しいですが...
- constを一貫して使用する(メンバ関数がオブジェクトを変更するかどうかをチェックする, 関数がポインタや参照で渡される引数を変更するかどうかをチェックする)
- キャストの使用をチェックする(キャストは型システムを無効にする).
- 標準ライブラリを模倣したコードの検出 (難しい)

### 個人的な所感
[リーダブルコード](https://www.oreilly.co.jp/books/9784873115658/)にも触れられている内容であり, 基本的には自明な内容が記載されていると判断.
- コメントなどで表現せず, なるべくコードそのもので意味がわかるようにすべき, という点.
- 標準ライブラリを扱うことで実施したいことが表現される点.
